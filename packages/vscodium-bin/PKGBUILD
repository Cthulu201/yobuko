# Maintainer: Cthulu201 <cthulu201@duck.com>

_pkgname=VSCodium
pkgname=vscodium-bin
pkgver=1.62.2
pkgrel=3
pkgdesc="Binary releases of VS Code without MS branding/telemetry/licensing."
arch=('x86_64')
url="https://github.com/VSCodium/vscodium"
license=('MIT')
groups=('yobuko')
depends=('fontconfig' 'libxtst' 'gtk3' 'python' 'cairo' 'alsa-lib' 'nss' 'gcc-libs' 'libnotify'
         'libxss' 'glibc>=2.28-4')
optdepends=('gvfs: For move to trash functionality'
            'libdbusmenu-glib: For KDE global menu')
provides=('codium' 'vscodium')
conflicts=('vscodium' 'vscodium-git')
source=("https://github.com/VSCodium/vscodium/releases/download/${pkgver}/${_pkgname}-linux-x64-${pkgver}.tar.gz")
sha512sums=('0146b0a93c84c7c2b9271f38fa1234866d78eb13f485c0b4c8ae264c60d104bd8d3150a4c0573b678dd09c663b5b572d5b287659fb15f042a49cd91ac5fb56c3')

shopt -s extglob

package() {
  install -d -m755 ${pkgdir}/usr/bin
  install -d -m755 ${pkgdir}/usr/share/{${pkgname},applications,pixmaps}
  cp -r ${srcdir}/!(vscodium-bin.desktop|${pkgname}-${pkgver}.tar.gz) ${pkgdir}/usr/share/${pkgname}
  ln -s /usr/share/${pkgname}/bin/codium ${pkgdir}/usr/bin/codium
  ln -s /usr/share/${pkgname}/bin/codium ${pkgdir}/usr/bin/vscodium
  install -D -m644 ${srcdir}/resources/app/resources/linux/code.png \
          ${pkgdir}/usr/share/pixmaps/vscodium.png
}
