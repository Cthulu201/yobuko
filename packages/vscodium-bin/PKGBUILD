# Maintainer: Cthulu201 <cthulu201@duck.com>

_pkgname=VSCodium
pkgname=vscodium-bin
pkgver=1.69.0
pkgrel=1
pkgdesc="Binary releases of VS Code without MS branding/telemetry/licensing."
arch=('x86_64')
url="https://github.com/VSCodium/vscodium"
license=('MIT')
groups=('yobuko')
depends=('fontconfig' 'libxtst' 'gtk3' 'python' 'cairo' 'alsa-lib' 'nss' 'gcc-libs' 'libnotify'
         'libxss' 'glibc>=2.28-4')
optdepends=('gvfs: For move to trash functionality'
            'libdbusmenu-glib: For KDE global menu')
provides=('codium' 'vscodium')
conflicts=('vscodium' 'vscodium-git')
source=("https://github.com/VSCodium/vscodium/releases/download/${pkgver}/${_pkgname}-linux-x64-${pkgver}.tar.gz")
sha512sums=('66fa63fd72199f3f0c8b7c3b975f16a4ee40ff6e1cbc2d6e14a4bf6d2e1095dce5b4653ca03ce47acae1e6926d849ab7fa3550916c38072892aab6736fffff9a')

shopt -s extglob

package() {
  install -d -m755 ${pkgdir}/usr/bin
  install -d -m755 ${pkgdir}/usr/share/{${pkgname},applications,pixmaps}
  cp -r ${srcdir}/!(vscodium-bin.desktop|${pkgname}-${pkgver}.tar.gz) ${pkgdir}/usr/share/${pkgname}
  ln -s /usr/share/${pkgname}/bin/codium ${pkgdir}/usr/bin/codium
  ln -s /usr/share/${pkgname}/bin/codium ${pkgdir}/usr/bin/vscodium
  install -D -m644 ${srcdir}/resources/app/resources/linux/code.png \
          ${pkgdir}/usr/share/pixmaps/vscodium.png
}
