# Maintainer: Cthulu201 <cthulu201@duck.com>

# Check for latest release:
# `curl https://brave-browser-downloads.s3.brave.com/latest/release.version`

pkgname=brave-bin
pkgver=1.56.1
pkgrel=1
pkgdesc='A fast, private and secure web browser for PC, Mac and mobile'
arch=(x86_64)
url=https://brave.com
license=(MPL2 BSD custom:chromium)
groups=('yobuko')
depends=('alsa-lib' 'gtk3' 'libxss' 'nss' 'ttf-font')
makedepends=('unzip')
optdepends=('cups:             Printer support'
            'libgnome-keyring: Enable GNOME keyring support'
            'libnotify:        Native notification support')
provides=("${pkgname%-bin}=${pkgver}" 'brave-browser')
conflicts=("${pkgname%-bin}")
replaces=("${pkgname%-bin}")
options=(!strip)
source=("${pkgname}.zip::https://github.com/brave/${pkgname%-bin}-browser/releases/download/v${pkgver}/${pkgname%-bin}-browser-${pkgver}-linux-amd64.zip")
noextract=("${pkgname}.zip")
sha512sums=('fb903850f32ae5ed011f76975773a9106002bcfca151730f9593e227afcb73eb9c05243718c51b4ed99a7cbbba8ac355649724aceab35218467cd9ad16838842')

prepare() {
  unzip "${pkgname}.zip" -d "${pkgname}"
}

package() {
  cd "${srcdir}/${pkgname}" || exit

  install -dm0755 "${pkgdir}/usr/bin"
  install -dm0755 "${pkgdir}/opt/${pkgname}"
  install -Dm0644 "LICENSE" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"

  cp -a ./* "${pkgdir}/opt/${pkgname}/"
  ln -s "/opt/${pkgname}/${pkgname%-bin}-browser" "${pkgdir}/usr/bin/${pkgname%-bin}-browser"
}
