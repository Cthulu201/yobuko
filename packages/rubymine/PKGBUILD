# Maintainer: Cthulu201 <cthulu201@duck.com>

pkgname="rubymine"
pkgver=2023.1.5
pkgrel=1
pkgdesc="Ruby and Rails IDE with the full stack of essential developer tools"
arch=('x86_64')
url=https://www.jetbrains.com/ruby/
license=(custom)
groups=('yobuko')
depends=(desktop-file-utils gtk-update-icon-cache)
optdepends=('ruby: Ruby run/debug support')
options=(!strip)
source=("${pkgname}-${pkgver}::https://download.jetbrains.com/ruby/${pkgname:+RubyMine}-${pkgver}.tar.gz")
sha512sums=('62908af2453fe2317da2b6b3afe09ccd72945a99fa4ac5fa1b90bbbba67d975e0fdd3adc5e5b21ac8770b4e94c359a6e76e35b382616649e93217a3023708da7')

package() {
  cd "${srcdir}/${pkgname:+RubyMine}-${pkgver%.4}" || exit

  install -dm0755 "${pkgdir}/usr/bin/"
  install -dm0755 "${pkgdir}/opt/${pkgname}"
  install -dm0755 "${pkgdir}/usr/share/licenses/${pkgname}/"

  cp -a ./* "${pkgdir}/opt/${pkgname}/"
  cp -a "license/"* "${pkgdir}/usr/share/licenses/${pkgname}/"
  ln -s "/opt/${pkgname}/bin/${pkgname}.sh" "${pkgdir}/usr/bin/${pkgname}"
}
