# Maintainer: Cthulu201 <cthulu201@duck.com>

pkgname=thorium-browser
pkgver=119.0.6045.214
pkgrel=1
pkgdesc='Chromium fork named after radioactive element No. 90'
arch=(x86_64)
url=https://thorium.rocks/
license=(BSD3)
groups=('yobuko')
depends=('gtk3' 'nss' 'alsa-lib' 'xdg-utils' 'libxss' 'libcups' 'libgcrypt'
         'ttf-liberation' 'dbus' 'libpulse' 'pciutils' 'libva' 'libffi'
         'desktop-file-utils' 'hicolor-icon-theme')
makedepends=('unzip')
options=(!strip)
source=("${pkgname}-${pkgver}.zip::https://github.com/Alex313031/${pkgname%-browser}/releases/download/M${pkgver}/${pkgname}_${pkgver}_amd64.zip"
        "https://raw.githubusercontent.com/Alex313031/thorium/main/LICENSE.md")
noextract=("${pkgname}-${pkgver}.zip")
sha512sums=('b0160a02c0a048685eaa2e0af8eb46f1b2df3a6c2c857b9cdcbf93f4d2a6d3e7666a02b0e6ea5b7caa952e04808e7d127b86ebd5d76bc9f4623fb6ff45153c5c'
            'e0fda1ee2d4cc9835d842b7059b239ddaf04c8547f2036dd6fb06d368b725531f12b628f7ca32de63a9a0e141cc156d2e632e09ff605fc7069596b7d6a70a1f4')

prepare() {
  unzip "${pkgname}-${pkgver}.zip" -d "${pkgname}-${pkgver}"
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}" || exit

  install -dm0755 "${pkgdir}/usr/bin"
  install -dm0755 "${pkgdir}/opt/${pkgname}"
  install -Dm0644 "${srcdir}/LICENSE.md" "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE.md"

  cp -a ./* "${pkgdir}/opt/${pkgname}/"
  ln -s "/opt/${pkgname}/${pkgname%-browser}" "${pkgdir}/usr/bin/${pkgname}"
}
